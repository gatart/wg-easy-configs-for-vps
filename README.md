# wg-easy-configs-for-vps
Набор конфигов для поднятия собственного VPN (Wireguard) c DNS-сервером.

## Описание
Репозиторий представляет собой набор конфигов для поднятия **wg-easy**. Улучшения заключаются в ограничении доступа к панели администрирования только через VPN соединение.
Реализация через Docker контейнеры с использованием образов wg-easy, nginx и bind9.    
Nginx используется только для перенаправления трафика с 80, 443 порта на порт админки (51821 tcp)

## Структура
```
.
├── docker-compose.yml
├── my_dns
│   ├── cache
│   ├── config
│   │   ├── gatart.zone
│   │   └── named.conf
│   └── records
└── wg-easy.conf
```


## Переменные
В конфигах DNS сервера есть файл `DOMEN.zone`, в котором необходимо изменить `DOMEN` на свой.

Переменная | Описание | Расположение
--- | --- | ---
SERVER_IP | Белый адрес вашей VPS | docker-compose.yml
PANEL-PASSWD | Пароль от панели администратора VPN | docker-compose.yml
WG-PUB-PORT | Порт доступа VPN соединения | docker-compose.yml x2
PANEL-HOSTNAME | Имя сервера с панелью администрирования <br> (любое, чисто для удобства работы в браузере) | wg-easy.conf <br> named.conf x2 <br> DOMEN.zone
DOMEN | Имя домена в VPN соединении <br> (любое, чисто для удобства работы в браузере) | wg-easy.conf <br> DOMEN.zone x6


## Работа с контейнерами
При первом запуске в сервисе _wg-easy_ требуется добавить порт панели администрирования, чтобы выписать себе первый VPN конфиг.    
Проброс порта администрирования во внешнюю сеть:
```docker-compose.yml
services:
  wg-easy:
    ports:
      - "51821:51821/tcp"
```
> **НЕ ЗАБУДЬТЕ убрать этот порт после генерации первого конфига и перезапустить сервис.**

Запуск контейнеров:
```bash
docker-compose up -d
```

Остановка контейнеров:
```bash
docker-compose down
```


## Обновление образа wg-easy
#### [Ссылка на официальный wg-easy](https://github.com/wg-easy/wg-easy)
